<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Balance Game</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        canvas { max-width: 100%; height: auto; }
        .radar-container { max-width: 600px; margin: auto; }
        .mini-radar-container { max-width: 300px; margin: auto; }
        .grid-radar-container { max-width: 250px; margin: auto; }
        .floating-radar-container {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 150px;
            z-index: 1000;
            transition: opacity 0.3s;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            padding: 8px;
        }
        .floating-radar-container.hidden { opacity: 0; }
        .floating-buttons-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            transition: opacity 0.3s;
        }
        .range-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
        }
        .range-input::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
        }
        .typewriter {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 font-sans min-h-screen">
    <div id="root"></div>
    <script type="text/javascript">
        const lifeAreas = [
            { name: "Health", emoji: "ðŸ’ª", subAreas: ["Mental Health", "Sleep", "Fitness", "Nutrition", "Hygiene"], description: "Physical and mental well-being for a vibrant life.", tips: {
                "Mental Health": score => score < 4 ? "Practice mindfulness or seek professional support." : score < 7 ? "Incorporate daily stress-relief activities." : "Maintain your mental wellness routine.",
                "Sleep": score => score < 4 ? "Establish a consistent sleep schedule." : score < 7 ? "Limit screen time before bed." : "Continue prioritising quality sleep.",
                "Fitness": score => score < 4 ? "Start with short daily workouts." : score < 7 ? "Vary your exercise routine." : "Keep up your fitness regimen.",
                "Nutrition": score => score < 4 ? "Plan balanced meals." : score < 7 ? "Reduce processed foods." : "Sustain your healthy eating habits.",
                "Hygiene": score => score < 4 ? "Set a daily hygiene routine." : score < 7 ? "Focus on consistent self-care." : "Maintain excellent hygiene practices."
            }},
            { name: "Appearance", emoji: "ðŸªž", subAreas: ["Body Image", "Skincare", "Hair", "Fashion", "Aesthetic Care"], description: "Confidence in your personal style and grooming.", tips: {
                "Body Image": score => score < 4 ? "Practice self-compassion exercises." : score < 7 ? "Focus on positive affirmations." : "Continue embracing your body confidence.",
                "Skincare": score => score < 4 ? "Start a basic skincare routine." : score < 7 ? "Use sunscreen daily." : "Keep up your skincare regimen.",
                "Hair": score => score < 4 ? "Consult a stylist for care tips." : score < 7 ? "Maintain regular hair care." : "Sustain your hair care routine.",
                "Fashion": score => score < 4 ? "Explore styles that suit you." : score < 7 ? "Update your wardrobe gradually." : "Keep expressing your style.",
                "Aesthetic Care": score => score < 4 ? "Try simple grooming habits." : score < 7 ? "Experiment with new looks." : "Maintain your aesthetic routine."
            }},
            { name: "Love", emoji: "â¤ï¸", subAreas: ["Self-love", "Romantic Relationships", "Partnership", "Dating Life", "Intimacy"], description: "Nurturing self-love and romantic connections.", tips: {
                "Self-love": score => score < 4 ? "Practice daily self-care rituals." : score < 7 ? "Reflect on personal strengths." : "Continue fostering self-love.",
                "Romantic Relationships": score => score < 4 ? "Communicate openly with partners." : score < 7 ? "Plan quality time together." : "Maintain strong romantic bonds.",
                "Partnership": score => score < 4 ? "Work on mutual goals." : score < 7 ? "Strengthen trust with partner." : "Keep nurturing your partnership.",
                "Dating Life": score => score < 4 ? "Explore new social settings." : score < 7 ? "Be open to new connections." : "Enjoy your active dating life.",
                "Intimacy": score => score < 4 ? "Discuss needs with partner." : score < 7 ? "Build emotional closeness." : "Sustain intimate connections."
            }},
            { name: "Family", emoji: "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦", subAreas: ["Bonding Time", "Support Systems", "Responsibilities", "Stability", "Traditions"], description: "Strengthening family ties and support.", tips: {
                "Bonding Time": score => score < 4 ? "Schedule family activities." : score < 7 ? "Plan regular family time." : "Keep family bonding strong.",
                "Support Systems": score => score < 4 ? "Reach out to family." : score < 7 ? "Strengthen family communication." : "Maintain family support networks.",
                "Responsibilities": score => score < 4 ? "Delegate family tasks." : score < 7 ? "Balance family duties." : "Continue managing responsibilities.",
                "Stability": score => score < 4 ? "Create a stable routine." : score < 7 ? "Focus on family consistency." : "Sustain family stability.",
                "Traditions": score => score < 4 ? "Start new family traditions." : score < 7 ? "Reinforce existing traditions." : "Keep family traditions alive."
            }},
            { name: "Friends", emoji: "ðŸ¤", subAreas: ["Social Circle", "Social Support", "Social Events", "Shared Experiences", "Cultural Exchange"], description: "Building a supportive social network.", tips: {
                "Social Circle": score => score < 4 ? "Join local groups." : score < 7 ? "Nurture existing friendships." : "Maintain a vibrant social circle.",
                "Social Support": score => score < 4 ? "Seek supportive friends." : score < 7 ? "Offer help to friends." : "Continue building social support.",
                "Social Events": score => score < 4 ? "Attend community events." : score < 7 ? "Plan social gatherings." : "Keep active in social events.",
                "Shared Experiences": score => score < 4 ? "Create shared moments." : score < 7 ? "Engage in group activities." : "Sustain shared experiences.",
                "Cultural Exchange": score => score < 4 ? "Explore diverse cultures." : score < 7 ? "Share cultural experiences." : "Continue cultural exchanges."
            }},
            { name: "Career", emoji: "ðŸ’¼", subAreas: ["Formal Education", "Skill Development", "Learning", "Networking", "Work-Life Balance"], description: "Advancing professional growth and balance.", tips: {
                "Formal Education": score => score < 4 ? "Enroll in a course." : score < 7 ? "Pursue advanced learning." : "Maintain educational growth.",
                "Skill Development": score => score < 4 ? "Learn a new skill." : score < 7 ? "Practice existing skills." : "Keep honing your skills.",
                "Learning": score => score < 4 ? "Read industry materials." : score < 7 ? "Attend workshops." : "Continue lifelong learning.",
                "Networking": score => score < 4 ? "Join professional groups." : score < 7 ? "Attend networking events." : "Maintain strong networks.",
                "Work-Life Balance": score => score < 4 ? "Set work boundaries." : score < 7 ? "Prioritise personal time." : "Sustain work-life balance."
            }},
            { name: "Money", emoji: "ðŸ’°", subAreas: ["Income", "Savings", "Investing", "Financial Planning", "Financial Independence"], description: "Securing financial stability and growth.", tips: {
                "Income": score => score < 4 ? "Explore income opportunities." : score < 7 ? "Diversify income sources." : "Maintain steady income.",
                "Savings": score => score < 4 ? "Start a savings plan." : score < 7 ? "Increase savings rate." : "Continue saving consistently.",
                "Investing": score => score < 4 ? "Learn about investments." : score < 7 ? "Diversify investments." : "Keep managing investments.",
                "Financial Planning": score => score < 4 ? "Create a budget." : score < 7 ? "Review financial goals." : "Sustain financial planning.",
                "Financial Independence": score => score < 4 ? "Set independence goals." : score < 7 ? "Track progress to independence." : "Maintain financial independence."
            }},
            { name: "Self-Growth", emoji: "ðŸŒ±", subAreas: ["Purpose", "Goal Setting", "Habits and Routines", "Self-Reflection", "Self-Awareness"], description: "Pursuing personal development and purpose.", tips: {
                "Purpose": score => score < 4 ? "Explore personal values." : score < 7 ? "Align actions with purpose." : "Continue living purposefully.",
                "Goal Setting": score => score < 4 ? "Set achievable goals." : score < 7 ? "Refine your goals." : "Keep pursuing your goals.",
                "Habits and Routines": score => score < 4 ? "Build positive habits." : score < 7 ? "Tweak daily routines." : "Maintain productive habits.",
                "Self-Reflection": score => score < 4 ? "Start journaling." : score < 7 ? "Reflect regularly." : "Continue self-reflection.",
                "Self-Awareness": score => score < 4 ? "Practice mindfulness." : score < 7 ? "Deepen self-understanding." : "Sustain self-awareness."
            }},
            { name: "Spirituality", emoji: "ðŸ§˜", subAreas: ["Mindfulness", "Connection with People", "Compassion", "Personal Beliefs", "Connection with Nature"], description: "Finding inner peace and connection.", tips: {
                "Mindfulness": score => score < 4 ? "Try meditation." : score < 7 ? "Practice daily mindfulness." : "Maintain mindfulness practice.",
                "Connection with People": score => score < 4 ? "Build deeper connections." : score < 7 ? "Nurture relationships." : "Keep strong connections.",
                "Compassion": score => score < 4 ? "Practice kindness." : score < 7 ? "Volunteer for causes." : "Continue showing compassion.",
                "Personal Beliefs": score => score < 4 ? "Explore spiritual beliefs." : score < 7 ? "Reflect on beliefs." : "Sustain personal beliefs.",
                "Connection with Nature": score => score < 4 ? "Spend time outdoors." : score < 7 ? "Engage with nature." : "Maintain nature connection."
            }},
            { name: "Recreation", emoji: "ðŸŽ®", subAreas: ["Hobbies", "Leisure", "Entertainment", "Pleasure", "Sport"], description: "Enjoying hobbies and leisure activities.", tips: {
                "Hobbies": score => score < 4 ? "Try a new hobby." : score < 7 ? "Dedicate time to hobbies." : "Keep enjoying hobbies.",
                "Leisure": score => score < 4 ? "Schedule leisure time." : score < 7 ? "Explore new leisure activities." : "Maintain leisure balance.",
                "Entertainment": score => score < 4 ? "Find fun activities." : score < 7 ? "Vary entertainment choices." : "Continue enjoying entertainment.",
                "Pleasure": score => score < 4 ? "Seek joyful experiences." : score < 7 ? "Balance pleasure activities." : "Keep finding pleasure.",
                "Sport": score => score < 4 ? "Try a new sport." : score < 7 ? "Join a sports group." : "Maintain sports activities."
            }},
            { name: "Environment", emoji: "ðŸ¡", subAreas: ["Travel", "Organisation", "Cleanliness", "Comfort", "Maintenance"], description: "Creating a comfortable living space.", tips: {
                "Travel": score => score < 4 ? "Plan a local trip." : score < 7 ? "Explore new destinations." : "Keep enjoying travel.",
                "Organisation": score => score < 4 ? "Start decluttering." : score < 7 ? "Improve organisation systems." : "Maintain an organised space.",
                "Cleanliness": score => score < 4 ? "Set cleaning routines." : score < 7 ? "Deep clean regularly." : "Keep a clean environment.",
                "Comfort": score => score < 4 ? "Enhance home comfort." : score < 7 ? "Add cozy elements." : "Maintain a comfortable space.",
                "Maintenance": score => score < 4 ? "Fix small issues." : score < 7 ? "Schedule regular maintenance." : "Keep up with maintenance."
            }},
            { name: "Community", emoji: "ðŸŒ", subAreas: ["Aesthetics", "Connections", "Social Responsibility", "Helping Others", "Local Events", "Volunteering"], description: "Contributing to your local community.", tips: {
                "Aesthetics": score => score < 4 ? "Improve community spaces." : score < 7 ? "Contribute to local aesthetics." : "Maintain community beauty.",
                "Connections": score => score < 4 ? "Meet local people." : score < 7 ? "Strengthen community ties." : "Keep community connections.",
                "Social Responsibility": score => score < 4 ? "Learn about local issues." : score < 7 ? "Engage in community projects." : "Continue social responsibility.",
                "Helping Others": score => score < 4 ? "Offer help locally." : score < 7 ? "Support community members." : "Keep helping others.",
                "Local Events": score => score < 4 ? "Attend local events." : score < 7 ? "Organise community events." : "Stay active in local events.",
                "Volunteering": score => score < 4 ? "Start volunteering." : score < 7 ? "Increase volunteer time." : "Maintain volunteer commitment."
            }}
        ];

        function Typewriter({ text }) {
            const [displayedText, setDisplayedText] = React.useState('');
            const [index, setIndex] = React.useState(0);

            React.useEffect(() => {
                setDisplayedText('');
                setIndex(0);
            }, [text]);

            React.useEffect(() => {
                if (index < text.length) {
                    const timeout = setTimeout(() => {
                        setDisplayedText(prev => prev + text[index]);
                        setIndex(prev => prev + 1);
                    }, 50);
                    return () => clearTimeout(timeout);
                }
            }, [index, text]);

            return React.createElement('span', { className: 'typewriter italic' }, 'ðŸ’¡Tip: ', displayedText);
        }

        function App() {
            const [scores, setScores] = React.useState(Array(12).fill(5));
            const [selectedArea, setSelectedArea] = React.useState(null);
            const [subScores, setSubScores] = React.useState({});
            const [report, setReport] = React.useState(null);
            const [currentRecommendationIndex, setCurrentRecommendationIndex] = React.useState(0);
            const [showRadar, setShowRadar] = React.useState(true);
            const [showGridView, setShowGridView] = React.useState(false);
            const [showFloatingRadar, setShowFloatingRadar] = React.useState(false);
            const [isSubCategoriesExpanded, setIsSubCategoriesExpanded] = React.useState(false);
            const panelRefs = React.useRef(lifeAreas.reduce((acc, area) => ({ ...acc, [area.name]: React.createRef() }), {}));
            const radarRef = React.useRef(null);

            const calculateOverallScore = () => {
                const ideal = 5;
                const deviations = scores.map(score => Math.abs(score - ideal));
                const balanceScore = Math.max(0, 10 - deviations.reduce((sum, dev) => sum + dev, 0) / scores.length);
                return Math.round(balanceScore * 10) / 10;
            };

            const getGrade = (score) => {
                const ideal = 5;
                const deviation = Math.abs(score - ideal);
                if (deviation <= 0.05) return 'A';
                if (deviation <= 1) return 'B';
                if (deviation <= 2) return 'C';
                if (deviation <= 3) return 'D';
                return 'E';
            };

            const overallScore = calculateOverallScore();

            const getColor = (score) => {
                const ideal = 5;
                const maxDeviation = 5;
                const deviation = Math.abs(score - ideal);
                const ratio = Math.min(deviation / maxDeviation, 1);
                const r = Math.round(34 + (239 - 34) * ratio);
                const g = Math.round(197 - (197 - 68) * ratio);
                const b = Math.round(94 - (94 - 68) * ratio);
                return `rgb(${r}, ${g}, ${b})`;
            };

            const getSliderColorClass = (score) => {
                return `custom-${score.toFixed(1).replace('.', '-')}`;
            };

            React.useEffect(() => {
                const styles = scores.concat(
                    Object.values(subScores).flatMap(area => Object.values(area || {}))
                ).map(score => score || 5).map(score => {
                    const color = getColor(score);
                    const className = `.range-input.custom-${score.toFixed(1).replace('.', '-')}`;
                    return `
                        ${className}::-webkit-slider-thumb { background: ${color}; }
                        ${className}::-moz-range-thumb { background: ${color}; }
                    `;
                }).join('\n');
                
                const styleSheet = document.createElement('style');
                styleSheet.textContent = styles;
                document.head.appendChild(styleSheet);
                
                return () => document.head.removeChild(styleSheet);
            }, [scores, subScores]);

            React.useEffect(() => {
                const handleScroll = () => {
                    const radarContainer = document.querySelector('.radar-container');
                    if (radarContainer) {
                        const rect = radarContainer.getBoundingClientRect();
                        setShowFloatingRadar(rect.bottom < 0);
                    }
                };

                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            React.useEffect(() => {
                if (!showRadar || showGridView) return;
                const ctx = document.getElementById('radarChart').getContext('2d');
                const idealData = Array(12).fill(5);

                let lastTapTime = 0;
                let lastTappedIndex = null;

                const chart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: lifeAreas.map(area => selectedArea === area.name ? `${area.emoji} ${area.name}` : area.emoji),
                        datasets: [
                            {
                                label: 'Life Balance',
                                data: scores,
                                backgroundColor: 'rgba(59, 130, 246, 0.3)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 3,
                                pointBackgroundColor: scores.map(score => getColor(score)),
                                pointRadius: 8,
                                pointHoverRadius: 12
                            },
                            {
                                label: 'Ideal Balance',
                                data: idealData,
                                backgroundColor: 'rgba(200, 200, 200, 0.2)',
                                borderColor: 'rgba(200, 200, 200, 1)',
                                borderWidth: 2,
                                pointRadius: 0,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        scales: {
                            r: {
                                min: 0,
                                max: 10,
                                ticks: { stepSize: 2, font: { size: 14 } },
                                pointLabels: { 
                                    font: { size: 22, weight: 'bold' },
                                    callback: (label, index) => label
                                }
                            }
                        },
                        plugins: {
                            legend: { display: false }
                        },
                        onClick: (e, elements, chart) => {
                            const points = chart.getElementsAtEventForMode(e, 'point', { intersect: true }, true);
                            if (points.length) {
                                const index = points[0].index;
                                const areaName = lifeAreas[index].name;
                                setSelectedArea(areaName === selectedArea ? null : areaName);
                            }

                            const labelPosition = chart.getElementsAtEventForMode(e, 'index', { intersect: false }, true);
                            if (labelPosition.length) {
                                const index = labelPosition[0].index;
                                const currentTime = new Date().getTime();
                                const tapLength = currentTime - lastTapTime;

                                if (tapLength < 300 && lastTappedIndex === index) {
                                    const areaName = lifeAreas[index].name;
                                    setSelectedArea(areaName);
                                    if (panelRefs.current[areaName].current) {
                                        panelRefs.current[areaName].current.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }
                                    lastTapTime = 0;
                                    lastTappedIndex = null;
                                } else {
                                    lastTapTime = currentTime;
                                    lastTappedIndex = index;
                                }
                            }
                        }
                    }
                });

                return () => chart.destroy();
            }, [scores, showRadar, showGridView, selectedArea]);

            React.useEffect(() => {
                if (showFloatingRadar && showRadar && !showGridView && !report) {
                    const ctx = document.getElementById('floatingRadarChart').getContext('2d');
                    const idealData = Array(12).fill(5);

                    let lastTapTime = 0;

                    const chart = new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: lifeAreas.map(area => selectedArea === area.name ? `${area.emoji} ${area.name}` : area.emoji),
                            datasets: [
                                {
                                    label: 'Life Balance',
                                    data: scores,
                                    backgroundColor: 'rgba(59, 130, 246, 0.3)',
                                    borderColor: 'rgba(59, 130, 246, 1)',
                                    borderWidth: 2,
                                    pointBackgroundColor: scores.map(score => getColor(score)),
                                    pointRadius: 4,
                                    pointHoverRadius: 6
                                },
                                {
                                    label: 'Ideal Balance',
                                    data: idealData,
                                    backgroundColor: 'rgba(200, 200, 200, 0.2)',
                                    borderColor: 'rgba(200, 200, 200, 1)',
                                    borderWidth: 1,
                                    pointRadius: 0,
                                    fill: true
                                }
                            ]
                        },
                        options: {
                            scales: {
                                r: {
                                    min: 0,
                                    max: 10,
                                    ticks: { stepSize: 2, font: { size: 8 } },
                                    pointLabels: { font: { size: 8 } }
                                }
                            },
                            plugins: {
                                legend: { display: false }
                            },
                            onClick: (e, elements, chart) => {
                                const currentTime = new Date().getTime();
                                const tapLength = currentTime - lastTapTime;

                                if (tapLength < 300) {
                                    if (radarRef.current) {
                                        radarRef.current.scrollIntoView({ behavior: 'smooth' });
                                    }
                                    lastTapTime = 0;
                                    return;
                                } else {
                                    lastTapTime = currentTime;
                                }
                            }
                        }
                    });
                    return () => chart.destroy();
                }
            }, [scores, showRadar, showGridView, showFloatingRadar, report, selectedArea]);

            React.useEffect(() => {
                if (selectedArea && showRadar && !showGridView) {
                    const area = lifeAreas.find(a => a.name === selectedArea);
                    const subAreaData = area.subAreas.map(subArea => subScores[selectedArea]?.[subArea] || 5);
                    const idealSubData = Array(area.subAreas.length).fill(5);
                    const ctx = document.getElementById(`miniRadarChart-${selectedArea}`).getContext('2d');

                    const chart = new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: area.subAreas,
                            datasets: [
                                {
                                    label: `${selectedArea} Balance`,
                                    data: subAreaData,
                                    backgroundColor: 'rgba(59, 130, 246, 0.3)',
                                    borderColor: 'rgba(59, 130, 246, 1)',
                                    borderWidth: 1,
                                    pointBackgroundColor: subAreaData.map(score => getColor(score)),
                                    pointRadius: 6,
                                    pointHoverRadius: 8
                                },
                                {
                                    label: 'Ideal Balance',
                                    data: idealSubData,
                                    backgroundColor: 'rgba(200, 200, 200, 0.2)',
                                    borderColor: 'rgba(200, 200, 200, 1)',
                                    borderWidth: 0.5,
                                    pointRadius: 0,
                                    fill: true
                                }
                            ]
                        },
                        options: {
                            scales: {
                                r: {
                                    min: 0,
                                    max: 10,
                                    ticks: { stepSize: 2, font: { size: 12 } },
                                    pointLabels: { font: { size: 12 } }
                                }
                            },
                            plugins: {
                                legend: { display: false }
                            }
                        }
                    });
                    return () => chart.destroy();
                }
            }, [selectedArea, subScores, showRadar, showGridView]);

            React.useEffect(() => {
                if (showGridView && showRadar) {
                    lifeAreas.forEach(area => {
                        const subAreaData = area.subAreas.map(subArea => subScores[area.name]?.[subArea] || 5);
                        const idealSubData = Array(area.subAreas.length).fill(5);
                        const ctx = document.getElementById(`gridRadarChart-${area.name}`).getContext('2d');

                        const chart = new Chart(ctx, {
                            type: 'radar',
                            data: {
                                labels: area.subAreas,
                                datasets: [
                                    {
                                        label: `${area.name} Balance`,
                                        data: subAreaData,
                                        backgroundColor: 'rgba(59, 130, 246, 0.3)',
                                        borderColor: 'rgba(59, 130, 246, 1)',
                                        borderWidth: 1,
                                        pointBackgroundColor: subAreaData.map(score => getColor(score)),
                                        pointRadius: 6,
                                        pointHoverRadius: 8
                                    },
                                    {
                                        label: 'Ideal Balance',
                                        data: idealSubData,
                                        backgroundColor: 'rgba(200, 200, 200, 0.2)',
                                        borderColor: 'rgba(200, 200, 200, 1)',
                                        borderWidth: 0.5,
                                        pointRadius: 0,
                                        fill: true
                                    }
                                ]
                            },
                            options: {
                                scales: {
                                    r: {
                                        min: 0,
                                        max: 10,
                                        ticks: { stepSize: 2, font: { size: 10 } },
                                        pointLabels: { font: { size: 10 } }
                                    }
                                },
                                plugins: {
                                    legend: { display: false }
                                }
                            }
                        });
                        return () => chart.destroy();
                    });
                }
            }, [subScores, showRadar, showGridView]);

            const updateCategoryScore = (area) => {
                const areaIndex = lifeAreas.findIndex(a => a.name === area);
                const subAreaData = lifeAreas.find(a => a.name === area).subAreas.map(sub => subScores[area]?.[sub] || 5);
                const averageScore = subAreaData.reduce((sum, score) => sum + score, 0) / subAreaData.length;
                const newScores = [...scores];
                newScores[areaIndex] = Math.round(averageScore * 10) / 10;
                setScores(newScores);
            };

            const handleSubScoreChange = (area, subArea, value) => {
                const newSubScores = { ...subScores, [area]: { ...subScores[area], [subArea]: value } };
                setSubScores(newSubScores);
                updateCategoryScore(area);
            };

            const generateReport = () => {
                const ideal = 5;
                const threshold = ideal * 0.01;
                const lowScores = lifeAreas
                    .map((area, index) => ({ 
                        name: area.name, 
                        score: scores[index], 
                        emoji: area.emoji,
                        subAreas: area.subAreas.map(subArea => ({
                            name: subArea,
                            score: subScores[area.name]?.[subArea] || 5,
                            grade: getGrade(subScores[area.name]?.[subArea] || 5),
                            status: Math.abs((subScores[area.name]?.[subArea] || 5) - ideal) <= threshold ? 'âœ…' : 'âš ï¸'
                        }))
                    }))
                    .filter(item => Math.abs(item.score - ideal) > threshold)
                    .map(item => ({
                        area: item.name,
                        emoji: item.emoji,
                        score: item.score,
                        grade: getGrade(item.score),
                        recommendation: `Focus on improving ${item.name}. Your score of ${item.score.toFixed(1)} is outside the ideal range. Consider small, actionable steps like setting specific goals or seeking support in this area.`,
                        tips: lifeAreas.find(a => a.name === item.name).subAreas.map(subArea => ({
                            subArea,
                            tip: lifeAreas.find(a => a.name === item.name).tips[subArea](subScores[item.name]?.[subArea] || 5)
                        })),
                        subAreas: item.subAreas
                    }));
                setReport(lowScores.length ? lowScores : [{
                    area: "All",
                    emoji: "",
                    score: overallScore,
                    grade: getGrade(overallScore),
                    recommendation: "All areas are within the ideal balance range. Keep maintaining your life balance!",
                    tips: [],
                    subAreas: []
                }]);
                setCurrentRecommendationIndex(0);
                setShowRadar(false);
                setIsSubCategoriesExpanded(false);
            };

            const nextRecommendation = () => {
                if (report && currentRecommendationIndex < report.length - 1) {
                    setCurrentRecommendationIndex(currentRecommendationIndex + 1);
                    setIsSubCategoriesExpanded(false);
                }
            };

            const prevRecommendation = () => {
                if (report && currentRecommendationIndex > 0) {
                    setCurrentRecommendationIndex(currentRecommendationIndex - 1);
                    setIsSubCategoriesExpanded(false);
                }
            };

            const exitReport = () => {
                setReport(null);
                setShowRadar(true);
            };

            const toggleGridView = () => {
                setShowGridView(!showGridView);
                setSelectedArea(null);
            };

            const toggleSubCategories = () => {
                setIsSubCategoriesExpanded(!isSubCategoriesExpanded);
            };

            const getReportSummary = () => {
                if (!report) return "";
                if (report.length === 1 && report[0].area === "All") {
                    return `âœ… Your life is well-balanced with an overall score of ${overallScore} (Grade: ${report[0].grade}). All areas are within the ideal range.`;
                }
                return `Your overall balance score is ${overallScore} (Grade: ${getGrade(overallScore)}). ${report.length} area(s) need attention to achieve optimal balance.`;
            };

            const getCategoryStatus = () => {
                const ideal = 5;
                const threshold = ideal * 0.01;
                return lifeAreas.map((area, index) => ({
                    name: area.name,
                    emoji: area.emoji,
                    score: scores[index].toFixed(1),
                    grade: getGrade(scores[index]),
                    status: Math.abs(scores[index] - ideal) <= threshold ? 'âœ…' : 'âš ï¸',
                    subAreas: area.subAreas.map(subArea => ({
                        name: subArea,
                        score: (subScores[area.name]?.[subArea] || 5).toFixed(1),
                        grade: getGrade(subScores[area.name]?.[subArea] || 5),
                        status: Math.abs((subScores[area.name]?.[subArea] || 5) - ideal) <= threshold ? 'âœ…' : 'âš ï¸'
                    }))
                }));
            };

            return React.createElement(
                'div',
                { className: 'p-6 max-w-5xl mx-auto' },
                React.createElement(
                    'div',
                    { className: 'flex justify-between items-center mb-6' },
                    React.createElement('h1', { className: 'text-3xl font-extrabold text-indigo-700' }, 'Life Radar'),
                    React.createElement(
                        'div',
                        { className: 'text-right' },
                        React.createElement('span', { className: 'text-lg font-semibold text-gray-800' }, 'Score: '),
                        React.createElement('span', { className: 'text-2xl font-bold text-indigo-600' }, overallScore)
                    )
                ),
                showRadar && !showGridView && React.createElement(
                    'div',
                    { className: 'radar-container bg-white rounded-xl shadow-lg p-4', ref: radarRef },
                    React.createElement('canvas', { id: 'radarChart' })
                ),
                React.createElement(
                    'div',
                    { className: `floating-radar-container ${showFloatingRadar && !report ? '' : 'hidden'}` },
                    React.createElement('canvas', { id: 'floatingRadarChart' })
                ),
                showRadar && React.createElement(
                    'div',
                    { className: 'floating-buttons-container flex space-x-4' },
                    React.createElement(
                        'button',
                        {
                            onClick: generateReport,
                            className: 'w-32 bg-indigo-600 text-white py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors'
                        },
                        'ðŸ“„ Report'
                    ),
                    React.createElement(
                        'button',
                        {
                            onClick: toggleGridView,
                            className: 'w-32 bg-indigo-600 text-white py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors'
                        },
                        showGridView ? 'Radar' : 'All Radars'
                    )
                ),
                report && React.createElement(
                    'div',
                    { className: 'mt-6 p-6 bg-white rounded-xl shadow-md' },
                    React.createElement('h2', { className: 'text-2xl font-semibold text-indigo-600 mb-4' }, 'ðŸ“„ Life Balance Report'),
                    React.createElement('p', { className: 'text-lg text-gray-800 mb-4' }, getReportSummary()),
                    React.createElement(
                        'div',
                        { className: 'mb-4' },
                        React.createElement('h3', { className: 'text-lg font-semibold text-gray-700 mb-2' }, 'Category Status'),
                        React.createElement(
                            'table',
                            { className: 'w-full text-sm text-gray-600 border-collapse' },
                            React.createElement(
                                'thead',
                                null,
                                React.createElement(
                                    'tr',
                                    { className: 'bg-gray-100' },
                                    React.createElement('th', { className: 'p-2 text-left' }, 'Category'),
                                    React.createElement('th', { className: 'p-2 text-left' }, 'Score'),
                                    React.createElement('th', { className: 'p-2 text-left' }, 'Grade'),
                                    React.createElement('th', { className: 'p-2 text-left' }, 'Status')
                                )
                            ),
                            React.createElement(
                                'tbody',
                                null,
                                getCategoryStatus().map(({ name, emoji, score, grade, status }) =>
                                    React.createElement(
                                        'tr',
                                        { key: name, className: 'border-t' },
                                        React.createElement('td', { className: 'p-2' }, emoji, ' ', name),
                                        React.createElement('td', { className: 'p-2' }, score),
                                        React.createElement('td', { className: 'p-2' }, grade),
                                        React.createElement('td', { className: 'p-2' }, status)
                                    )
                                )
                            )
                        )
                    ),
                    React.createElement(
                        'div',
                        { className: 'mb-3' },
                        React.createElement(
                            'p',
                            { className: 'text-lg text-gray-800' },
                            React.createElement('strong', { className: 'text-indigo-600 text-xl' }, report[currentRecommendationIndex].emoji, ' ', report[currentRecommendationIndex].area + ':'),
                            ' ',
                            report[currentRecommendationIndex].recommendation
                        ),
                        report[currentRecommendationIndex].subAreas.length > 0 && React.createElement(
                            'div',
                            { className: 'mt-4' },
                            React.createElement(
                                'button',
                                {
                                    onClick: toggleSubCategories,
                                    className: 'text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center mb-2'
                                },
                                React.createElement('svg', {
                                    className: 'w-5 h-5 mr-1',
                                    fill: 'none',
                                    stroke: 'currentColor',
                                    viewBox: '0 0 24 24',
                                    xmlns: 'http://www.w3.org/2000/svg'
                                }, React.createElement('path', {
                                    strokeLinecap: 'round',
                                    strokeLinejoin: 'round',
                                    strokeWidth: '2',
                                    d: isSubCategoriesExpanded ? 'M19 14l-7-7-7 7' : 'M5 10l7 7 7-7'
                                })),
                                isSubCategoriesExpanded ? 'Hide Sub-Categories' : 'Show Sub-Categories'
                            ),
                            isSubCategoriesExpanded && React.createElement(
                                'table',
                                { className: 'w-full text-sm text-gray-600 border-collapse' },
                                React.createElement(
                                    'thead',
                                    null,
                                    React.createElement(
                                        'tr',
                                        { className: 'bg-gray-50' },
                                        React.createElement('th', { className: 'p-2 text-left' }, 'Sub-Category'),
                                        React.createElement('th', { className: 'p-2 text-left' }, 'Score'),
                                        React.createElement('th', { className: 'p-2 text-left' }, 'Grade'),
                                        React.createElement('th', { className: 'p-2 text-left' }, 'Status')
                                    )
                                ),
                                React.createElement(
                                    'tbody',
                                    null,
                                    report[currentRecommendationIndex].subAreas.map(({ name, score, grade, status }) =>
                                        React.createElement(
                                            'tr',
                                            { key: name, className: 'border-t' },
                                            React.createElement('td', { className: 'p-2 pl-4' }, name),
                                            React.createElement('td', { className: 'p-2' }, score),
                                            React.createElement('td', { className: 'p-2' }, grade),
                                            React.createElement('td', { className: 'p-2' }, status)
                                        )
                                    )
                                )
                            )
                        ),
                        report[currentRecommendationIndex].tips.length > 0 && React.createElement(
                            'div',
                            { className: 'mt-4' },
                            React.createElement('h2', { className: 'text-lg font-semibold text-gray-700 mb-2' }, React.createElement('strong', null, 'Tips')),
                            React.createElement(
                                'ul',
                                { className: 'list-disc pl-5 text-sm text-gray-600' },
                                report[currentRecommendationIndex].tips.map(({ subArea, tip }) =>
                                    React.createElement('li', { key: subArea, className: 'typewriter italic' }, 'ðŸ’¡Tip: ', tip)
                                )
                            )
                        )
                    ),
                    React.createElement(
                        'div',
                        { className: 'flex justify-between mt-4' },
                        React.createElement(
                            'button',
                            {
                                onClick: prevRecommendation,
                                disabled: currentRecommendationIndex === 0,
                                className: 'bg-gray-300 text-gray-700 py-2 px-4 rounded-lg disabled:opacity-50 hover:bg-gray-400 transition-colors'
                            },
                            'Previous'
                        ),
                        React.createElement(
                            'button',
                            {
                                onClick: nextRecommendation,
                                disabled: currentRecommendationIndex === report.length - 1,
                                className: 'bg-gray-300 text-gray-700 py-2 px-4 rounded-lg disabled:opacity-50 hover:bg-gray-400 transition-colors'
                            },
                            'Next'
                        ),
                        React.createElement(
                            'button',
                            {
                                onClick: exitReport,
                                className: 'bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors'
                            },
                            'Exit Report'
                        )
                    )
                ),
                showRadar && !showGridView && React.createElement(
                    'div',
                    { className: 'mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6' },
                    lifeAreas
                        .filter(area => !selectedArea || area.name === selectedArea)
                        .map((area, index) =>
                            React.createElement(
                                'div',
                                {
                                    key: area.name,
                                    className: 'p-5 bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow',
                                    ref: panelRefs.current[area.name]
                                },
                                React.createElement(
                                    'div',
                                    { className: 'flex justify-between items-center' },
                                    React.createElement('h2', { className: 'text-xl font-semibold text-indigo-600 mb-2' }, area.emoji, ' ', area.name),
                                    React.createElement(
                                        'button',
                                        {
                                            onClick: () => setSelectedArea(lifeAreas.findIndex(a => a.name === area.name) === lifeAreas.findIndex(a => a.name === selectedArea) ? null : area.name),
                                            className: 'text-indigo-600 hover:text-indigo-800 text-sm font-medium'
                                        },
                                        React.createElement('svg', {
                                            className: 'w-5 h-5 mr-1',
                                            fill: 'none',
                                            stroke: 'currentColor',
                                            viewBox: '0 0 24 24',
                                            xmlns: 'http://www.w3.org/2000/svg'
                                        }, React.createElement('path', {
                                            strokeLinecap: 'round',
                                            strokeLinejoin: 'round',
                                            strokeWidth: '2',
                                            d: selectedArea ? 'M6 18L18 6M6 6l12 12' : 'M4 8h16M4 16h16'
                                        }))
                                    )
                                ),
                                React.createElement('p', { className: 'text-sm text-gray-600 mb-3' }, area.description),
                                React.createElement(
                                    'div',
                                    { className: 'flex items-center' },
                                    React.createElement('input', {
                                        type: 'range',
                                        min: '0',
                                        max: '10',
                                        step: '0.1',
                                        value: scores[lifeAreas.findIndex(a => a.name === area.name)],
                                        disabled: true,
                                        className: `range-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-not-allowed ${getSliderColorClass(scores[lifeAreas.findIndex(a => a.name === area.name)])}`
                                    })
                                ),
                                selectedArea === area.name && React.createElement(
                                    'div',
                                    { className: 'mt-4 space-y-3' },
                                    React.createElement(
                                        'div',
                                        { className: 'mini-radar-container' },
                                        React.createElement('canvas', { id: `miniRadarChart-${area.name}` })
                                    ),
                                    area.subAreas.map(subArea =>
                                        React.createElement(
                                            'div',
                                            { key: subArea, className: 'ml-4' },
                                            React.createElement('label', { className: 'text-sm font-bold text-gray-600' }, subArea),
                                            React.createElement(
                                                'div',
                                                { className: 'flex items-center space-x-3' },
                                                React.createElement('input', {
                                                    type: 'range',
                                                    min: '0',
                                                    max: '10',
                                                    step: '0.1',
                                                    value: subScores[area.name]?.[subArea] || 5,
                                                    onChange: (e) => handleSubScoreChange(area.name, subArea, parseFloat(e.target.value)),
                                                    className: `range-input w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${getSliderColorClass(subScores[area.name]?.[subArea] || 5)}`
                                                }),
                                                React.createElement('span', { className: 'text-sm text-gray-700' }, (subScores[area.name]?.[subArea] || 5).toFixed(1))
                                            ),
                                            React.createElement(
                                                'p',
                                                { className: 'text-sm text-gray-600 mt-1' },
                                                React.createElement(Typewriter, { text: area.tips[subArea](subScores[area.name]?.[subArea] || 5) })
                                            )
                                        )
                                    )
                                )
                            )
                        )
                ),
                showRadar && showGridView && React.createElement(
                    'div',
                    { className: 'mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6' },
                    lifeAreas.map(area =>
                        React.createElement(
                            'div',
                            { key: area.name, className: 'p-5 bg-white rounded-xl shadow-md' },
                            React.createElement('h2', { className: 'text-xl font-semibold text-indigo-600 mb-2' }, area.emoji, ' ', area.name),
                            React.createElement(
                                'div',
                                { className: 'grid-radar-container' },
                                React.createElement('canvas', { id: `gridRadarChart-${area.name}` })
                            ),
                            React.createElement(
                                'div',
                                { className: 'mt-4' },
                                React.createElement('h3', { className: 'text-lg font-medium text-gray-700 mb-2' }, 'Tips'),
                                React.createElement(
                                    'ul',
                                    { className: 'list-disc pl-5 text-sm text-gray-600' },
                                    area.subAreas.map(subArea =>
                                        React.createElement('li', { key: subArea, className: 'italic' }, 'ðŸ’¡Tip: ', area.tips[subArea](subScores[area.name]?.[subArea] || 5))
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
